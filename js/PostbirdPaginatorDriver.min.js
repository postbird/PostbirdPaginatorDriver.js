/**
     PostbirdPaginatorDriver 自动分页驱动
    功能：
        - 可以自动获取当前页，并进行响应式显示。
        - 不污染url，GET参数可正常再次传递
        - 可配置性高，多种显示选择
    Author:Postbird | http://www.ptbird.cn
    License:MIT
*/
var PostbirdPaginatorDriver={init:function(a){this.pageBox=document.querySelector(a.pageBox);this.totalPage=a.totalPage||1;this.currentPage=a.currentPage||1;this.currentPageBySelf=a.currentPageBySelf||!0;this.pageMin=a.pageMin||5;this.url=a.url||location.href;this.pageParam=a.pageParam||"page";this.pageClass=a.pageClass||"page-item";this.showPreviusNextPage=a.showPreviusNextPage||!0;this.showFirstLastPage=a.showFirstLastPage||!0;this.previusPageText=a.previusPageText||"&laquo;";this.nextPageText=
a.nextPageText||"&raquo;";this.firstPageText=a.firstPageText||"\u9996\u9875";this.lastPageText=a.lastPageText||"\u5c3e\u9875";this.side=a.side||3;this.check();this.baseUrl=this.getBaseUrl();console.log(this.currentPage);this.renderPageHtml()},check:function(){this.currentPageBySelf&&(this.currentPage=this.getCurrentPageBySelf());if(this.currentPage>this.totalPage)throw Error("Error in check : currentPage must <= totalPage");if(!this.pageBox)throw Error("Error in check : pageBox is not a valiable dom selector");
},getCurrentPageBySelf:function(){var a=new RegExp("(^|&)"+this.pageParam+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(a);return this.currentPage=null!=a?parseInt(unescape(a[2])):1},getPreviusPage:function(){return 1>=this.currentPage?this.getLinkHtml(1,this.previusPageText,"disabled"):this.getLinkHtml(this.currentPage-1,this.previusPageText,"normal")},getNextPage:function(){return this.currentPage==this.totalPage?this.getLinkHtml(this.totalPage,this.nextPageText,"disabled"):this.getLinkHtml(this.currentPage+
1,this.nextPageText,"normal")},getFirstPage:function(){return 1==this.currentPage?this.getLinkHtml(1,this.firstPageText,"disabled"):this.getLinkHtml(1,this.firstPageText,"normal")},getLastPage:function(){return this.currentPage==this.totalPage?this.getLinkHtml(this.totalPage,this.lastPageText,"disabled"):this.getLinkHtml(this.totalPage,this.lastPageText,"normal")},getLinkItemPages:function(){var a="";if(this.totalPage<=this.pageMin)for(var b=1;b<=this.totalPage;b++)a=b==this.currentPage?a+this.getLinkHtml(b,
b,"active"):a+this.getLinkHtml(b,b,"normal");else 1>=this.currentPage-this.side?(a+=this.getUrlRangeLink(1,1+this.side),a+=this.getLinkHtml("...","...","disabled"),a+=this.getLinkHtml(this.totalPage,this.totalPage,"normal")):this.currentPage+this.side>=this.totalPage?(a+=this.getLinkHtml(1,1,"normal"),a+=this.getLinkHtml("...","...","disabled"),a+=this.getUrlRangeLink(this.totalPage-this.side,this.totalPage)):(a+=this.getLinkHtml(1,1,"normal"),2<this.currentPage-this.side&&(a+=this.getLinkHtml("...",
"...","disabled")),a+=this.getUrlRangeLink(this.currentPage-this.side,this.currentPage+this.side-1),a+=this.getLinkHtml("...","...","disabled"),a+=this.getUrlRangeLink(this.totalPage,this.totalPage,"normal"));return a},getUrlRangeLink:function(a,b){var c="";if(a<=b&&0<a){for(;a<=b;a++)c=a==this.currentPage?c+this.getLinkHtml(a,a,"active"):c+this.getLinkHtml(a,a,"normal");return c}throw Error("Error in getUrlRangeLink : start must <= stop");},getBaseUrl:function(){var a=this,b=location.href.split("?"),
c="";2==b.length&&b[1].split("&").forEach(function(b){b=b.split("=");b[0]!=a.pageParam?c+=b[0]+"="+b[1]+"&":!1});return b[0]+"?"+c},getLinkHtml:function(a,b,c){switch(c||"normal"){case "active":c='<li class="'+this.pageClass+' active">';a=this.baseUrl+this.pageParam+"="+a;break;case "disabled":c='<li class="'+this.pageClass+' disabled">';a="javascript:void(0);";break;default:c='<li class="'+this.pageClass+'">',a=this.baseUrl+this.pageParam+"="+a}return c+'<a href="'+a+'">'+b+"</a></li>"},renderPageHtml:function(){var a=
"",b="";this.showFirstLastPage&&(a+=this.getFirstPage(),b+=this.getLastPage());this.showPreviusNextPage&&(a+=this.getPreviusPage(),b=this.getNextPage()+b);this.pageBox.innerHTML=a+this.getLinkItemPages()+b}};